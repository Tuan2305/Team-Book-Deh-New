{% load static %}

<header
  class="section-header"
  style="font-family: Arial, sans-serif; font-size: 14px">
  <!-- Top nav: Language + Contact -->
  <nav
    class="navbar p-md-0 navbar-expand-sm navbar-light border-bottom"
    style="background-color: #f8f9fa">
    <div class="container d-flex justify-content-between">
      <div class="d-flex">
        <a href="#" class="nav-link px-2">English</a>
        <a href="#" class="nav-link px-2">Japanese</a>
      </div>
      <div class="d-flex">
        <a href="#" class="nav-link px-2"
          ><i class="fa fa-envelope"></i> Email</a
        >
        <a href="#" class="nav-link px-2"
          ><i class="fa fa-phone"></i> Call us</a
        >
      </div>
    </div>
  </nav>

 <!-- Main navbar: Logo + Search + Cart -->
 <section class="header-main border-bottom py-3">
  <div class="container">
    <div class="row align-items-center gx-3 gy-2">

      <!-- LOGO -->
      <div class="col-6 col-md-3 col-lg-2">
        <a href="{% url 'home' %}" class="text-decoration-none">
          <p style="
            font-family: 'Segoe UI', sans-serif;
            font-size: 28px;
            font-weight: 700;
            color: #bab3b3;
            margin: 0;
            letter-spacing: 4px;
            text-shadow: 2px 3px 4px rgba(0, 0, 0, 0.6);">
            CPDV
          </p>
        </a>
      </div>

      <!-- P1: Category + Store + Search -->
      <div class="col-12 col-md-6 col-lg-7">
        <div class="d-flex flex-wrap align-items-center justify-content-center gap-2">

          <!-- Category -->
          <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
              <i class="fa fa-bars"></i> All category
            </button>
            <div class="dropdown-menu">
              <a class="dropdown-item" href="{% url 'store' %}">All Products</a>
              {% for category in links %}
                <a class="dropdown-item" href="{{ category.get_url }}">{{ category.category_name }}</a>
              {% endfor %}
            </div>
          </div>

          <!-- Store -->
          <a href="{% url 'store' %}" class="btn btn-outline-primary">Store</a>

          <!-- Search -->
          <form action="{% url 'search' %}" method="GET" class="d-flex flex-grow-1" style="gap: 8px; min-width: 200px;">
            <input type="text" class="form-control" name="keyword" placeholder="Search">
            <button type="submit" class="btn btn-primary">
              <i class="fa fa-search"></i>
            </button>
          </form>

        </div>
      </div>

      <!-- USER + CART -->
      <div class="col-6 col-md-3 col-lg-3 d-flex justify-content-end align-items-center gap-3 text-end">
        <div>
          {% if user.id is None %}
            <small class="text-muted">Welcome guest!</small><br>
            <a href="{% url 'login' %}">Sign in</a> |
            <a href="{% url 'register' %}">Register</a>
            {% else %}
            <small class="text-muted">Welcome {{ user.first_name }}!</small><br>
            <a href="{% url 'dashboard' %}">Dashboard</a> |
            <a href="{% url 'logout' %}">Logout</a>
          {% endif %}
        </div>

        <div style="position: relative;">
          <a href="{% url 'cart' %}" class="text-dark" style="text-decoration: none;">
            <div class="d-inline-block border rounded-circle p-2">
              <i class="fa fa-shopping-cart"></i>
            </div>
            <span class="badge badge-danger rounded-pill" style="
              position: absolute;
              top: -8px;
              right: -8px;
              font-size: 12px;
              padding: 4px 6px;">
              {{ cart_count }}
            </span>
          </a>
        </div>
      </div>

    </div>
  </div>
</section>



</header>
